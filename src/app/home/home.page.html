<ion-content class="ion-padding ion-text-center">
  <!-- Menú lateral -->
  <ion-menu contentId="main-content">
    <ion-header>
      <ion-toolbar>
        <ion-title>Menú</ion-title>
      </ion-toolbar>
      <ion-item button (click)="cerrarSesion()">
        <ion-label>Cerrar Sesión</ion-label>
      </ion-item>
    </ion-header>
  </ion-menu>
  <div class="ion-page" id="main-content">
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Registro de Asistencia</ion-title>
      </ion-toolbar>
    </ion-header>
  </div>

  <h6>Escanea un QR</h6>

  <!-- Scan QR -->
  <div *ngIf="segment === 'Scan'">
    <div class="segment">
      <img src="./assets/images/scan-qr.webp" alt="" />
      <h6 class="scan-label">Escanea o selecciona un código QR</h6>

      <div class="d-flex-center">
        <ion-grid>
          <ion-row>
            <ion-col size="12" class="ion-text-center">
              <ion-button (click)="startScan()" class="submit" expand="block">
                Escanear
                <ion-icon slot="end" name="scan-outline"></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <!-- Resultado del Scan -->
      <ion-item class="result" *ngIf="scanResult" lines="none">
        <ion-label>
          <p>Resultado del Scan</p>
          <div>{{ scanResult }}</div>
        </ion-label>
        <ion-buttons slot="end">
          <ion-button color="tertiary">
            <ion-icon slot="icon-only" name="copy-outline"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-item>
    </div>
  </div>

  <!-- Lista de Clases -->
  <ion-list>
    <!-- Iterar sobre las clases -->
    <ion-item *ngFor="let clase of clases" (click)="toggleAsistencia(clase)">
      <ion-label>
        <h3>{{ clase.nombre }}</h3>
        <p>Sección: {{ clase.seccion }}</p>
        <p>Profesor: {{ clase.profesor }}</p>
      </ion-label>
      <ion-icon
        [name]="selectedClase === clase ? 'chevron-up-outline' : 'chevron-down-outline'"
        slot="end"
      ></ion-icon>
    </ion-item>
  
    <!-- Mostrar asistencias solo si la clase está seleccionada -->
    <ion-list *ngIf="selectedClase">
      <ion-item *ngFor="let asistencia of selectedClase.asistencias">
        <p><strong>Estudiante:</strong> {{ asistencia.nombre }}</p>
        <p><strong>Fecha:</strong> {{ asistencia.fecha }}</p>
      </ion-item>
    </ion-list>
  </ion-list>
  
  
</ion-content>
